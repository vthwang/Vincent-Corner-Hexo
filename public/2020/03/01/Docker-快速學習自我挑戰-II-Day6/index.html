<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>Docker 快速學習自我挑戰 II Day6 | Vincent&#39;s Corner</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="Docker" />
    
    <meta name="description" content="容器編排 Swarm  到處使用 Container 很麻煩，為了解決這些問題，Docker Swarm 就出現了  如何管理這麼多容器？ 如何橫向擴展？ 如果容器 down 了，如何自動恢復？ 如何更新容器不影響業務？ 如何監控和追蹤這些容器？ 如何調度容器的創建？ 如何保護隱私數據？   Swarm 是集群，有集群就有節點，有節點就有角色，Swarm 總共有兩個角色，一個叫做 Manage">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker 快速學習自我挑戰 II Day6">
<meta property="og:url" content="https://vincent.fishboneapps.com/2020/03/01/Docker-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-II-Day6/index.html">
<meta property="og:site_name" content="Vincent&#39;s Corner">
<meta property="og:description" content="容器編排 Swarm  到處使用 Container 很麻煩，為了解決這些問題，Docker Swarm 就出現了  如何管理這麼多容器？ 如何橫向擴展？ 如果容器 down 了，如何自動恢復？ 如何更新容器不影響業務？ 如何監控和追蹤這些容器？ 如何調度容器的創建？ 如何保護隱私數據？   Swarm 是集群，有集群就有節點，有節點就有角色，Swarm 總共有兩個角色，一個叫做 Manage">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://vincent.fishboneapps.com/images/learning/docker-2/DockerDay06.png">
<meta property="article:published_time" content="2020-03-02T02:20:53.000Z">
<meta property="article:modified_time" content="2020-06-22T17:12:20.057Z">
<meta property="article:author" content="Vincent Ting Hsuan Wang">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://vincent.fishboneapps.com/images/learning/docker-2/DockerDay06.png">
<meta property="fb:admins" content="VincentTingSyuanWang">
<meta property="fb:app_id" content="1958612367696881">
    

    

    
        <link rel="icon" href="/images/vincent.ico" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.5.0/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-84065024-1', 'auto');
ga('send', 'pageview');

</script>

    
    
    


<meta name="generator" content="Hexo 6.1.0"></head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/English-Learning/">English Learning</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Reading-Note/">Reading Note</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Skill-Share/">Skill Share</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Study-Note/">Study Note</a></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/quotes">Quotes</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Study-Note/">Study Note</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-Docker-快速學習自我挑戰-II-Day6" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Docker 快速學習自我挑戰 II Day6
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
      <i class="fa fa-calendar"></i>
      <a href="/2020/03/01/Docker-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-II-Day6/" class="article-date">
         <time datetime="2020-03-02T02:20:53.000Z" itemprop="datePublished">2020-03-02</time>
      </a>
    </div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/Docker/" rel="tag">Docker</a>
    </div>

                

                
   <div class="article-counter">
      <i class="fa fa-file-word-o"></i>
      <span class="post-count-item-text">Symbols count in article: </span>
      <span class="post-count">3.6k</span>
      <i class="fa fa-clock-o"></i>
      <span class="post-time-item-text">Reading time: </span>
      <span class="post-count">15 mins. </span>
   </div>


            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            

            

            

            <img src="/images/learning/docker-2/DockerDay06.png">
<hr>
<h3 id="容器編排-Swarm">容器編排 Swarm</h3>
<ol>
<li>到處使用 Container 很麻煩，為了解決這些問題，Docker Swarm 就出現了
<ul>
<li>如何管理這麼多容器？</li>
<li>如何橫向擴展？</li>
<li>如果容器 down 了，如何自動恢復？</li>
<li>如何更新容器不影響業務？</li>
<li>如何監控和追蹤這些容器？</li>
<li>如何調度容器的創建？</li>
<li>如何保護隱私數據？</li>
</ul>
</li>
<li>Swarm 是集群，有集群就有節點，有節點就有角色，Swarm 總共有兩個角色，一個叫做 Manager，另一個叫做 Worker，Manager 就是大腦的角色，為了避免故障，Manager 至少要有兩個節點，但是多節點就會涉及到同步的問題，如何把 Manager A 的資料同步到 Manager B？這裡面就會用到內置的分佈式儲存的數據庫，數據是透過 Raft 協議去做的同步，Raft 能保證 Manager 之間的資料是對稱的，而 Worker 就是工作的節點，而這些工作的節點數據也是要同步的，它們會透過 Gossip network 來進行同步，這就是 Docker Swarm 的基礎架構</li>
</ol>
<img src="/images/learning/docker-2/DockerDay06-Image01.png">
<ol start="3">
<li>Services 和 Replicas，這邊的 Service 和 Docker Compose 的 Service 基本是一樣的，一個 Service 就代表一個 Container，在 Replicas 的模式下，要橫向去做擴展，一個 Replica 就是一個 Container，如下圖，我們要做 3 個 Replicas，它就會產生 3 個 Container，調度系統就會把 Container 調度到不同的 node 上面，透過一個 Swarm Manager 的節點去部署 Service 的時候，我們是不知道這些 Service 會運行在哪些 Swarm Node 上面的，這會透過 Swarm Scheduler 調度演算法去計算的，它會去看哪些 Node 負載比較輕，就會把 Container 調度到上面</li>
</ol>
<img src="/images/learning/docker-2/DockerDay06-Image02.png">
<ol start="4">
<li>Swarm 創建 Service 調度的過程，我們會在 Swarm Manager 做一些調度的決策，最後 Service 會部署在某個 Node 上面</li>
</ol>
<img src="/images/learning/docker-2/DockerDay06-Image03.png">
<h3 id="創建一個-3-個-Nodes-的-Swarm-集群">創建一個 3 個 Nodes 的 Swarm 集群</h3>
<ol>
<li>先使用 Vagrant 創建 3 台機器</li>
<li>連進去第一台機器，並初始化 Docker Swarm，它就會產生讓 Worker 加入的指令<br>
<code>docker swarm init --advertise-addr=192.168.205.13</code></li>
<li>在每個 worker 上執行初始化所產生的指令，就可以加入 Docker Swarm<br>
<code>docker swarm join --token SWMTKN-1-0beqcld9mv5m3w4fg1hdg3kcwqankezakxcj3k4ml0pbwq7pzj-f19znzunp0rc7kjiqfxuy4g4g 192.168.205.13:2377</code></li>
<li>在 manager 上執行 <code>docker node ls</code> 查看 Node 狀態，就會看到 1 個 manager，兩個 workers，Docker Swarm 就部署完畢了</li>
</ol>
<h3 id="Service-的創建維護和水平擴展">Service 的創建維護和水平擴展</h3>
<ol>
<li>在 manager 上創建一個 Service<br>
<code>docker service create --name demo busybox sh -c &quot;while true;do sleep 3600;done&quot;</code></li>
<li>使用 <code>docker service ls</code> 查看 Service 狀態</li>
<li>使用 <code>docker service ps demo</code>  查看 Service 運行位置</li>
<li>使用 <code>docker ps</code> 查看 container 會發現名稱是 demo 加上一堆亂數，因為 demo 是 Service 的名稱，不是 Container 的名稱</li>
<li>水平擴展 demo<br>
<code>docker service scale demo=5</code></li>
<li><code>docker service ps demo</code> 可以顯示所有 Container 的狀態，去個別的 Node 使用 <code>docker ps</code> 可以查看 Container 是否運行在對應的機器上</li>
<li>在 worker1 上刪除一個容器 <code>docker rm -f 16be3f59200c</code>，並在 manager 上執行 <code>docker service ps</code> 會發現 Replicas 剩下 4 個，過一下子，再執行 <code>docker service ps</code> 又會變回 5 個了</li>
<li>使用 <code>docker service ps demo</code> 就會看到剛剛在 worker1 刪除的 Container shutdown 了，它又在 worker2 又啟動了一個，如果 Swarm 發現有 Container 被停止了，就會立刻在任意一個節點上啟動一個</li>
<li>使用 <code>docker service rm demo</code> 可以刪除 Service，如果在節點上執行 <code>docker ps</code> 看到還有 Container，那是因為後台操作比較複雜，Swarm 需要看 Container 分佈在哪些 Node 上面，所以，只要稍微等一下，就會全部停止了</li>
</ol>
<h3 id="在-Swarm-集群通過-Service-部署-WordPress">在 Swarm 集群通過 Service 部署 WordPress</h3>
<ol>
<li>為了要讓 Swarm 裡面的 Container 互相溝通，需要在 manager 先新增網路<br>
<code>docker network create -d overlay demo</code></li>
<li>在 manager 查看網路 <code>docker network ls</code> 會看到剛剛新增的 demo，但是去 worker1 和 worker2 會找不到這個 demo</li>
<li>先不管網路，先新增 mysql Service<br>
<code>docker service create --name mysql --env MYSQL_ROOT_PASSWORD=root --env MYSQL_DATABASE=wordpress --network demo --mount type=volume,source=mysql-data,destination=/var/lib/mysql mysql:5.7</code></li>
<li>接下來，在新增 wordpress Service<br>
<code>docker service create --name wordpress -p 80:80 --env WORDPRESS_DB_PASSWORD=root --env WORDPRESS_DB_HOST=mysql --network demo wordpress</code></li>
<li><code>docker service ps wordpress</code> 查看 WordPress 服務運行在哪個節點，在瀏覽器用該節點 ip 進入 WordPress 網站頁面，並進行安裝，安裝完成就確定 MySQL 和 WordPress 這兩個 Service 是可以互享訪問的</li>
<li>我們可以知道 WordPress Container 是在 worker2，使用 worker2 的 ip 可以訪問網站，但是使用 manager 和 worker1 的 ip 一樣也可以訪問網站，這個原因在下個章節會說明</li>
<li>前面提到網路的問題，在新增完 Service 之後，我們可以看到 1 個 Service 在 manager，一個在 worker1，使用 <code>docker network ls</code> 就會看到前面新增的 demo 網路，而在沒有 Service 的 worker2 則看不到這個網路，也就是說，Swarm 在 worker1 新增 Service 的同時，也會讓 Overlay 的網路進行同步，前面提到多 Container 通信是使用 etcd，而 Docker Swarm 是不需要使用第三方的服務，本身底層的機制就會同步網路的創建</li>
</ol>
<h3 id="集群服務間通訊的-Routing-Mesh">集群服務間通訊的 Routing Mesh</h3>
<ol>
<li>Docker Swarm 的 Service 之間的溝通是透過 DNS 服務來實現，Swarm 本身有 DNS 服務發現的功能，在新增 Service 的同時， Swarm 就會把 Service 的紀錄新增到 DNS 紀錄裡，我們透過 DNS 紀錄就可以知道 Service 的 ip 地址，但是 Service 的 ip 地址並不是 Container 的 ip 地址，它會有一個 vip(虛擬 ip) 地址(如果 Service 有進行 scale 的情況下， container 不一定會在哪個節點上面，某個 Container shutdown 了，Swarm 會自動在其它節點新增 Container，這時候 Container 的 ip 地址都會改變，所以如果根據 Container 的實際地址去紀錄的話，這樣是很不穩定的)，Service 分配到的 vip 地址是不會變的，但是這個不變的 ip 後面會指向的真實 ip，它會在 Service 上創建一個 Container，它是透過 LVS 去實現的</li>
</ol>
<img src="/images/learning/docker-2/DockerDay06-Image04.png">
<ol start="2">
<li>創建一個 whoami 的 Service<br>
<code>docker service create --name whoami -p 8000:8000 --network demo -d jwilder/whoami</code></li>
<li>查看 Service 在哪個 Node 上面<br>
<code>docker service ps whoami</code></li>
<li>在該 Node 執行 <code>curl 127.0.0.1:8000</code> 就會回傳 Container id</li>
<li>再創建一個 busybox 的 Service<br>
<code>docker service create --name client -d --network demo busybox:1.28 sh -c &quot;while true; do sleep 3600; done&quot;</code></li>
<li>查看 Service 在哪個 Node 上面<br>
<code>docker service ps client</code></li>
<li>在該 Node 上執行進入 Container<br>
<code>docker exec -it client.1.kjw6og8khm6g8q2s8nhznrkg1 sh</code></li>
<li>我們去 ping whoami 這個 Service <code>ping whoami</code>，會發現是可以通的，但是會發現它 ping 的是 10.0.1.24，並不是 Container 的實際 ip</li>
<li>接下來，我們把 whoami 進行擴展並查看 Service 運行在哪個 Node 上面<br>
<code>docker service scale whoami=2</code><br>
<code>docker service ps whoami</code></li>
<li>在該 Node 查看 Container <code>docker ps</code>，就會發現新增的 whoami 運行在該 Node 上面</li>
<li>我們再次在 busybox 的 Container 上 ping whoami，發現還是可以通，而且它的 ip 還是 10.0.1.24，現在有兩個 whoami，但是只有一個名稱，到底是 ping 了哪個 Container 呢？現在的 10.0.1.24 其實不是兩個 Container 中的其中一個地址，而是一個 vip 地址</li>
<li>我們可以有 whoami Container Node 查詢 ip，會發現 10.0.1.24 不存在任何這兩個 Container 中<br>
<code>docker exec whoami.1.miy2t0q5khq02gqlg1txk1d4v ip a</code><br>
<code>docker exec whoami.2.am4jalucvzl0tazkr0qnnxdho ip a</code></li>
<li>再次在 busybox 查詢 <code>nslookup whoami</code>，會發現回傳的地址是 10.0.1.24，使用 <code>nslookup tasks.whoami</code>，就會回傳 Container 的真實 ip</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/ # nslookup tasks.whoami</span><br><span class="line">Server:    127.0.0.11</span><br><span class="line">Address 1: 127.0.0.11</span><br><span class="line"></span><br><span class="line">Name:      tasks.whoami</span><br><span class="line">Address 1: 10.0.1.25 whoami.1.miy2t0q5khq02gqlg1txk1d4v.demo</span><br><span class="line">Address 2: 10.0.1.30 whoami.2.am4jalucvzl0tazkr0qnnxdho.demo</span><br></pre></td></tr></table></figure>
<ol start="14">
<li>我們可以嘗試把 whoami Service 橫向擴展，<code>docker service scale whoami=3</code>，在 Busybox Node 使用 <code>nslookup tasks.whoami</code> 就會返回 3 筆 DNS 紀錄</li>
<li>接下來繼續在 busybox 裡面操作 <code>wget whoami:8000</code>，並讀取 <code>more index.html</code>，查看 Container id，然後刪除 <code>rm -rf index.html</code>，再次操作 <code>wget whoami:8000</code>，並讀取 <code>more index.html</code>，查看 Container id，會發現 Container id 改變了，也就是說，我們每次讀取的 Container 是不同的，這些負載平衡的操作，都是透過 LVS 實現的</li>
<li>Routing Mesh 的兩種體現
<ul>
<li><span style="color:red"><strong>Internal</strong></span> - Container 和 Container 之間的訪問透過 Overlay 網路(通過 vip 虛擬 ip)，Container 間透過 Service name 就可以訪問，如果 Service scale 的話，通過 vip 訪問會自動做負載平衡</li>
<li><span style="color:red"><strong>Ingress</strong></span> - 如果 Service 有綁定接口，則此服務可以通過任意 Swarm 節點的相應接口訪問，下章節會更詳細的講</li>
</ul>
</li>
<li>Internal Load Balacing 會自動透過 VIP 做負載平衡到每一個 Service 節點上</li>
</ol>
<img src="/images/learning/docker-2/DockerDay06-Image05.png">
<ol start="18">
<li>我們在 Client Container 訪問別的 Service 的時候，會先查詢 DNS，把 Service Name 解析成具體的 vip，然後會透過 Iptables 和 IPVS 來負載平衡到各個 Service 節點上</li>
</ol>
<img src="/images/learning/docker-2/DockerDay06-Image06.png">
<h3 id="Docker-Stack-部署-WordPress">Docker Stack 部署 WordPress</h3>
<ol>
<li>查看 <a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#deploy">Docker Compose Version 3 Reference</a> 的 deploy 的配置命令
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#endpoint_mode">ENDPOINT_MODE</a> - 網路模式，默認為 <code>vip</code>，還有一種 <code>dnsrr</code>，全稱為 DNS round-robin，負載平衡用輪流的方式來進行</li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#labels-1">LABELS</a> - 標籤</li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#mode">MODE</a> - 模式，默認為 <code>replicated</code>，可以生成很多 Container，另一種選項為 <code>global</code>，只會有一個 container</li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#placement">PLACEMENT</a> - 可以放入一些限制和偏好設置，例如：constraints 若設置為 <code>node.role == manager</code>，則該 Service 只會產生在 manager 節點</li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#replicas">REPLICAS</a> - 複製個體，可以設定有幾個複製體</li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#resources">RESOURCES</a> - 資源限制，可以優先分配 cpu 和 memory 給特定 Service</li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#restart_policy">RESTART_POLICY</a> - 重啟參數，可以設置一些延遲或是最大重啟次數</li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/#update_config">UPDATE_CONFIG</a> - 更新的時候，遵循的原則，假設我設定 <code>parallelism: 2</code>，那麼更新一次可以更新兩個 Replicas，設置 <code>delay: 10s</code>，每次更新的延遲就為 10 秒，也就是說要等第一個更新完成後 10 秒才能更第二個</li>
</ul>
</li>
<li>前面用過 Docker Compose 在本地部署 WordPress，現在要把 WordPress 部署到 Docker Swarm 裡面，將之前的 docker-compose.yml 檔案進行修改，首先要修改網路為 Overlay，然後 Service 部分加上一些 deploy 的參數</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3&#x27;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  web:</span><br><span class="line">    image: wordpress</span><br><span class="line">    ports:</span><br><span class="line">      - 8080:80</span><br><span class="line">    environment:</span><br><span class="line">      WORDPRESS_DB_HOST: mysql</span><br><span class="line">      WORDPRESS_DB_PASSWORD: root</span><br><span class="line">    networks:</span><br><span class="line">      - my-network</span><br><span class="line">    depends_on:</span><br><span class="line">      - mysql</span><br><span class="line">    deploy:</span><br><span class="line">      mode: replicated</span><br><span class="line">      replicas: 3</span><br><span class="line">      restart_policy:</span><br><span class="line">        condition: on-failure</span><br><span class="line">        delay: 5s</span><br><span class="line">        max_attempts: 3</span><br><span class="line">      update_config:</span><br><span class="line">        parallelism: 1</span><br><span class="line">        delay: 10s</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: root</span><br><span class="line">      MYSQL_DATABASE: wordpress</span><br><span class="line">    volumes:</span><br><span class="line">      - mysql-data:/var/lib/mysql</span><br><span class="line">    networks:</span><br><span class="line">      - my-network</span><br><span class="line">    deploy:</span><br><span class="line">      mode: global</span><br><span class="line">      placement:</span><br><span class="line">        constraints:</span><br><span class="line">          - node.role == manager</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  mysql-data:</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  my-network:</span><br><span class="line">    driver: overlay</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>利用 docker-compose.yml 啟動 Stack<br>
<code>docker stack deploy wordpress --compose-file=docker-compose.yml</code></li>
<li>可以利用 <code>docker stack ls</code>，<code>docker stack services wordpress</code> 和 <code>docker stack ps wordpress</code> 查看 Stack 裡面 Service 部署的情況</li>
<li>打開瀏覽器進入任何一台虛擬機的 ip，都可以開啟 WordPress 的服務，確認安裝完成之後，就可以用 <code>docker stack rm wordpress</code> 把 Stack 刪除</li>
</ol>
<h3 id="Docker-Secret-的管理和使用">Docker Secret 的管理和使用</h3>
<ol>
<li>MySQL 的密碼屬於敏感資訊，在 Production 的情況下，要避免直接放在 docker-compose 裡面，所以就需要 Docker Secret
<ul>
<li>什麼是 Secret？
<ul>
<li>用戶名密碼</li>
<li>SSH Key</li>
<li>TLS 認證</li>
<li>任何不想被看到的數據</li>
</ul>
</li>
</ul>
</li>
<li>在 Manager 節點會有基於 Raft 的分布式儲存，它能讓 Manager 之間的節點同步，而且存在內置的分佈式儲存的數據是加密的，Manager 和 Worker 之間的通信也通過 TLS 加密，像是 Private Key 也都加密過後存在 Manager 節點的硬碟上的</li>
</ol>
<img src="/images/learning/docker-2/DockerDay06-Image07.png">
<ol start="3">
<li>Secret Management
<ul>
<li>存在 Manager 節點 Raft 資料庫裡</li>
<li>Secret 可以指定給一個 Service，這個 Service 就能看到這個 Secret</li>
<li>在 Container 內部 Secret 看起來像是文件，但實際是在記憶體中</li>
</ul>
</li>
<li>在 Manager 節點新增一個檔案 <code>vim password</code> 並輸入 <code>admin123</code>，再將此檔案新增為 Secret Key<br>
<code>docker secret create my-pw password</code></li>
<li>使用 <code>docker secret ls</code> 就可以看到剛剛新增的 Key 了</li>
<li>上面的方法是用檔案新增 Key，也可以透過直接在指令回傳密碼的方式新增<br>
<code>echo &quot;adminadmin&quot; | docker secret create my-pw2 -</code></li>
<li>可以使用 <code>docker secret ls</code> 就可以查看到有兩個密碼了，也可以用 <code>docker secret rm my-pw</code> 刪除不要的密碼</li>
<li>可以直接在新增 Service 的時候把 key 加上去<br>
<code>docker service create --name client --secret my-pw2 busybox sh -c &quot;while true; do sleep 3600; done&quot;</code></li>
<li>我們可以直接進去 Service 查看密碼，就會在 /run/secrets/ 目錄下看到原始的密碼<br>
<code>docker exec -it client.1.k88i6xpjbtq34jk5vodnmxgby sh</code><br>
<code>cat /run/secrets/my-pw2</code></li>
<li>透過 Secret Key 創建 MySQL<br>
<code>docker service create --name db --secret my-pw2 -e MYSQL_ROOT_PASSWORD_FILE=/run/secrets/my-pw2 mysql</code></li>
<li>找到 MySQL 所在的 Node 進入 MySQL 裡面<br>
<code>docker exec -it db.1.ygxjss26mnd4bj3t1w46xeop7 sh</code></li>
<li>確認 Secret Key 是否存在<br>
<code>ls /run/secrets</code></li>
<li>嘗試使用 Secret Key 登入 MySQL，可以成功登入，證明 Secret Key 生效了<br>
<code>mysql -u root -p</code></li>
</ol>
<h3 id="Docker-Secret-在-Stack-中的使用">Docker Secret 在 Stack 中的使用</h3>
<ol>
<li>修改 docker-compose.yml 的 Secret Key 對應部分</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3.1&#x27;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  web:</span><br><span class="line">    image: wordpress</span><br><span class="line">    ports:</span><br><span class="line">      - 8080:80</span><br><span class="line">    secrets:</span><br><span class="line">      - my-pw2</span><br><span class="line">    environment:</span><br><span class="line">      WORDPRESS_DB_HOST: mysql</span><br><span class="line">      WORDPRESS_DB_PASSWORD_FILE: /run/secrets/my-pw2</span><br><span class="line">    networks:</span><br><span class="line">      - my-network</span><br><span class="line">    depends_on:</span><br><span class="line">      - mysql</span><br><span class="line">    deploy:</span><br><span class="line">      mode: replicated</span><br><span class="line">      replicas: 3</span><br><span class="line">      restart_policy:</span><br><span class="line">        condition: on-failure</span><br><span class="line">        delay: 5s</span><br><span class="line">        max_attempts: 3</span><br><span class="line">      update_config:</span><br><span class="line">        parallelism: 1</span><br><span class="line">        delay: 10s</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    secrets:</span><br><span class="line">      - my-pw2</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD_FILE: /run/secrets/my-pw2</span><br><span class="line">      MYSQL_DATABASE: wordpress</span><br><span class="line">    volumes:</span><br><span class="line">      - mysql-data:/var/lib/mysql</span><br><span class="line">    networks:</span><br><span class="line">      - my-network</span><br><span class="line">    deploy:</span><br><span class="line">      mode: global</span><br><span class="line">      placement:</span><br><span class="line">        constraints:</span><br><span class="line">          - node.role == manager</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  mysql-data:</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  my-network:</span><br><span class="line">    driver: overlay</span><br><span class="line"></span><br><span class="line">secrets:</span><br><span class="line">  my-pw2:</span><br><span class="line">    external: true</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>啟動 WordPress 的 Stack <code>docker service deploy wordpress -c=docker-compose.yml</code></li>
<li>可以查看 Stack Service 狀態 <code>docker stack services wordpress</code></li>
<li>打開瀏覽器，安裝 WordPress 確定網站正常運行</li>
</ol>
<h3 id="Service-更新">Service 更新</h3>
<ol>
<li>在運行狀態下更新 Service，而 Service 是運行在 Production 環境下面的，在更新狀態下，我們要避免服務停止</li>
<li>首先，新增一個 demo 的 Overlay 網路<br>
<code>docker network create -d overlay demo</code></li>
<li>新建一個 web 的 Service<br>
<code>docker service create --name web --publish 80:5000 --network demo fishboneapps/python-hello-world:1.0</code></li>
<li>啟動完成之後，先進行 Scale<br>
<code>docker service scale web=2</code></li>
<li>查看 Service 狀態<br>
<code>docker service ps web</code></li>
<li>檢查一下現在的服務狀態，會看到現在顯示 Hello Docker, Version 1.0<br>
<code>curl 127.0.0.1</code></li>
<li>在 Worker1 上進行循環 curl，讓我們查看在更新的過程中，服務是否中斷<br>
<code>sh -c &quot;while true; do curl 127.0.0.1&amp;sleep 1; done&quot;</code></li>
<li>使用 <code>docker service update</code> 進行更新，可以更新 Secret Key、Publish Port 和 Image 等等<br>
<code>docker service update --image fishboneapps/python-hello-world:2.0 web</code></li>
<li>會發現在 Workder1 上面的 curl 會自動跳成 2.0，且服務沒有中斷，這時候可以透過 <code>docker service ps web</code> 查看到服務更新的過程</li>
<li>測試更新 Service 端口，更新端口業務一定會中斷，因為訪問都是透過 vip + 端口去實現的，如果端口改變了，vip 的端口也會改變<br>
<code>docker service update --publish-rm 80:5000 --publish-add 8080:5000 web</code></li>
<li>Docker Stack 沒有更新的功能，只需要修改 docker-compose.yml，然後一樣執行 deploy 就會完成更新，流程跟 Service 一樣，docker-compose.yml 會有 update_config 的參數，它會依據這個 config 進行更新</li>
</ol>

        </div>
        <footer class="article-footer">
            



    <a data-url="https://vincent.fishboneapps.com/2020/03/01/Docker-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-II-Day6/" data-id="cl1dm2nnc001f5rtlhfjk09md" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Vincent Ting Hsuan Wang"
        },
        "headline": "Docker 快速學習自我挑戰 II Day6",
        "image": "https://vincent.fishboneapps.com/images/learning/docker-2/DockerDay06.png",
        "keywords": "Docker",
        "genre": "Study Note",
        "datePublished": "2020-03-02",
        "dateCreated": "2020-03-02",
        "dateModified": "2020-06-23",
        "url": "https://vincent.fishboneapps.com/2020/03/01/Docker-快速學習自我挑戰-II-Day6/",
        "description": "

容器編排 Swarm

到處使用 Container 很麻煩，為了解決這些問題，Docker Swarm 就出現了

如何管理這麼多容器？
如何橫向擴展？
如果容器 down 了，如何自動恢復？
如何更新容器不影響業務？
如何監控和追蹤這些容器？
如何調度容器的創建？
如何保護隱私數據？


Swarm 是集群，有集群就有節點，有節點就有角色，Swarm 總共有兩個角色，一個叫做 Manage",
        "wordCount": 1799
    }
</script>

</article>

    <section id="comments">
    
      
    <div class="fb-comments" data-width="100%" data-href="https://vincent.fishboneapps.com/2020/03/01/Docker-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-II-Day6/" data-num-posts="5"></div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="facebook-official" href="https://www.facebook.com/twang443" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook-official"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="linkedin-square" href="https://www.linkedin.com/in/twang443" target="_blank" rel="noopener">
                        <i class="icon fa fa-linkedin-square"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="https://twitter.com/twang443" target="_blank" rel="noopener">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="instagram" href="https://www.instagram.com/twang443" target="_blank" rel="noopener">
                        <i class="icon fa fa-instagram"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/TingSyuanWang" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2020/03/04/Docker-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-II-Day7/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            Docker 快速學習自我挑戰 II Day7
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2020/03/01/Docker-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-II-Day5/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">Docker 快速學習自我挑戰 II Day5</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
<div class="widget-wrap widget-list">
    <h3 class="widget-title">Catalog</h3>
    <div class="widget">
        <div id="toc" class="toc-article">
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E7%B7%A8%E6%8E%92-Swarm"><span class="toc-number">1.</span> <span class="toc-text">容器編排 Swarm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%B5%E5%BB%BA%E4%B8%80%E5%80%8B-3-%E5%80%8B-Nodes-%E7%9A%84-Swarm-%E9%9B%86%E7%BE%A4"><span class="toc-number">2.</span> <span class="toc-text">創建一個 3 個 Nodes 的 Swarm 集群</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service-%E7%9A%84%E5%89%B5%E5%BB%BA%E7%B6%AD%E8%AD%B7%E5%92%8C%E6%B0%B4%E5%B9%B3%E6%93%B4%E5%B1%95"><span class="toc-number">3.</span> <span class="toc-text">Service 的創建維護和水平擴展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8-Swarm-%E9%9B%86%E7%BE%A4%E9%80%9A%E9%81%8E-Service-%E9%83%A8%E7%BD%B2-WordPress"><span class="toc-number">4.</span> <span class="toc-text">在 Swarm 集群通過 Service 部署 WordPress</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8B%99%E9%96%93%E9%80%9A%E8%A8%8A%E7%9A%84-Routing-Mesh"><span class="toc-number">5.</span> <span class="toc-text">集群服務間通訊的 Routing Mesh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-Stack-%E9%83%A8%E7%BD%B2-WordPress"><span class="toc-number">6.</span> <span class="toc-text">Docker Stack 部署 WordPress</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-Secret-%E7%9A%84%E7%AE%A1%E7%90%86%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">7.</span> <span class="toc-text">Docker Secret 的管理和使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-Secret-%E5%9C%A8-Stack-%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">8.</span> <span class="toc-text">Docker Secret 在 Stack 中的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service-%E6%9B%B4%E6%96%B0"><span class="toc-number">9.</span> <span class="toc-text">Service 更新</span></a></li></ol>
        </div>
    </div>
</div>


            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/12/10/Golang-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-Day14/" class="thumbnail">
    
    
        <span style="background-image:url(/images/learning/golang/GolangDay14.jpg)" alt="Golang 快速學習自我挑戰 Day14" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study-Note/">Study Note</a></p>
                            <p class="item-title"><a href="/2021/12/10/Golang-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92%E8%87%AA%E6%88%91%E6%8C%91%E6%88%B0-Day14/" class="title">Golang 快速學習自我挑戰 Day14</a></p>
                            <p class="item-date"><time datetime="2021-12-10T13:20:08.000Z" itemprop="datePublished">2021-12-10</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/12/04/C-Learning-Journey-Day12/" class="thumbnail">
    
    
        <span style="background-image:url(/images/learning/cplusplus/CPlusPlusDay12.jpg)" alt="C++ Learning Journey Day12" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study-Note/">Study Note</a></p>
                            <p class="item-title"><a href="/2021/12/04/C-Learning-Journey-Day12/" class="title">C++ Learning Journey Day12</a></p>
                            <p class="item-date"><time datetime="2021-12-04T07:43:26.000Z" itemprop="datePublished">2021-12-04</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/12/03/C-Learning-Journey-Day11/" class="thumbnail">
    
    
        <span style="background-image:url(/images/learning/cplusplus/CPlusPlusDay11.jpg)" alt="C++ Learning Journey Day11" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study-Note/">Study Note</a></p>
                            <p class="item-title"><a href="/2021/12/03/C-Learning-Journey-Day11/" class="title">C++ Learning Journey Day11</a></p>
                            <p class="item-date"><time datetime="2021-12-03T12:46:32.000Z" itemprop="datePublished">2021-12-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/12/01/C-Learning-Journey-Day10/" class="thumbnail">
    
    
        <span style="background-image:url(/images/learning/cplusplus/CPlusPlusDay10.jpg)" alt="C++ Learning Journey Day10" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study-Note/">Study Note</a></p>
                            <p class="item-title"><a href="/2021/12/01/C-Learning-Journey-Day10/" class="title">C++ Learning Journey Day10</a></p>
                            <p class="item-date"><time datetime="2021-12-01T16:21:07.000Z" itemprop="datePublished">2021-12-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/11/27/C-Learning-Journey-Day9/" class="thumbnail">
    
    
        <span style="background-image:url(/images/learning/cplusplus/CPlusPlusDay09.jpg)" alt="C++ Learning Journey Day9" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Study-Note/">Study Note</a></p>
                            <p class="item-title"><a href="/2021/11/27/C-Learning-Journey-Day9/" class="title">C++ Learning Journey Day9</a></p>
                            <p class="item-date"><time datetime="2021-11-27T11:51:58.000Z" itemprop="datePublished">2021-11-27</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/English-Learning/">English Learning</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading-Note/">Reading Note</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Skill-Share/">Skill Share</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Study-Note/">Study Note</a><span class="category-list-count">134</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">7</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English-Grammer/" rel="tag">English Grammer</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English-Writing/" rel="tag">English Writing</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/" rel="tag">Golang</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Illustrator/" rel="tag">Illustrator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Laravel/" rel="tag">Laravel</a><span class="tag-list-count">22</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/" rel="tag">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nutrition/" rel="tag">Nutrition</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Productivity/" rel="tag">Productivity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React-Native/" rel="tag">React-Native</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/" rel="tag">UI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Weight-Loss/" rel="tag">Weight Loss</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WordPress/" rel="tag">WordPress</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/C/" style="font-size: 16.36px;">C++</a> <a href="/tags/CSS/" style="font-size: 13.64px;">CSS</a> <a href="/tags/Docker/" style="font-size: 19.09px;">Docker</a> <a href="/tags/English-Grammer/" style="font-size: 11.82px;">English Grammer</a> <a href="/tags/English-Writing/" style="font-size: 10.91px;">English Writing</a> <a href="/tags/Git/" style="font-size: 10.91px;">Git</a> <a href="/tags/Golang/" style="font-size: 18.18px;">Golang</a> <a href="/tags/HTML/" style="font-size: 13.64px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Illustrator/" style="font-size: 10px;">Illustrator</a> <a href="/tags/Java/" style="font-size: 18.18px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Jenkins/" style="font-size: 10px;">Jenkins</a> <a href="/tags/Kubernetes/" style="font-size: 14.55px;">Kubernetes</a> <a href="/tags/Laravel/" style="font-size: 20px;">Laravel</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Nodejs/" style="font-size: 18.18px;">Nodejs</a> <a href="/tags/Nutrition/" style="font-size: 12.73px;">Nutrition</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Productivity/" style="font-size: 10px;">Productivity</a> <a href="/tags/React/" style="font-size: 17.27px;">React</a> <a href="/tags/React-Native/" style="font-size: 15.45px;">React-Native</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/Weight-Loss/" style="font-size: 12.73px;">Weight Loss</a> <a href="/tags/WordPress/" style="font-size: 10px;">WordPress</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a target="_blank" rel="noopener" href="https://www.facebook.com/VincentTingSyuanWang">Facebook</a>
                    </li>
                
                    <li>
                        <a target="_blank" rel="noopener" href="https://kalasearch.cn">最優雅的搜尋引擎-卡拉搜索</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2016-2022 Vincent Ting Hsuan Wang</p>
                
                <p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="https://github.com/ppoffice" target="_blank">PPOffice</a></p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

    </div>
    
    
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en/sdk.js#xfbml=1&version=v9.0&appId=1958612367696881";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
        </script>
        
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML.js"></script>

    

    
    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


</body>
</html>
